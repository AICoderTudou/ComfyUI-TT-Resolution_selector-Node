"""
TT分辨率选择器节点
提供常用分辨率的下拉选择，返回width和height
"""

class TTResolutionSelector:
    """
    TT分辨率选择器节点
    """
    
    # 常用分辨率预设 (名称: (宽度, 高度))
    RESOLUTIONS = {
        "3072x2048": (3072, 2048),
        "2048x3072": (2048, 3072),
        "640x960 (2:3)": (640, 960),
        "960x640 (3:2)": (960, 640),
        "832x1216 (13:19)": (832, 1216),
        "1216x832 (19:13)": (1216, 832),
        "1024x1536 (2:3)": (1024, 1536),
        "1536x1024 (3:2)": (1536, 1024),
        "1280x720 (16:9)": (1280, 720),
        "1920x1080 (16:9)": (1920, 1080),
        "720x1280 (9:16)": (720, 1280),
        "1080x1920 (9:16)": (1080, 1920),
        "1344x768 (7:4)": (1344, 768),
        "768x1344 (4:7)": (768, 1344),
        "1152x896 (9:7)": (1152, 896),
        "896x1152 (7:9)": (896, 1152),
        "480x832 (3:5.2)": (480, 832),
        "832x480 (5.2:3)": (832, 480),
        "480x854 (9:16)": (480, 854),
        "854x480 (16:9)": (854, 480),
        "512x512 (1:1)": (512, 512),
        "768x768 (1:1)": (768, 768),
        "1024x1024 (1:1)": (1024, 1024),
        "512x768 (2:3)": (512, 768),
        "768x512 (3:2)": (768, 512),
        "512x896 (4:7)": (512, 896),
        "896x512 (7:4)": (896, 512),
    }
    
    @classmethod
    def INPUT_TYPES(cls):
        """
        定义输入类型
        """
        return {
            "required": {
                "resolution": (list(cls.RESOLUTIONS.keys()), {
                    "default": "1024x1024 (1:1)"
                }),
            }
        }
    
    RETURN_TYPES = ("INT", "INT")
    RETURN_NAMES = ("width", "height")
    FUNCTION = "get_resolution"
    CATEGORY = "utils"
    
    def get_resolution(self, resolution):
        """
        根据选择的分辨率返回宽度和高度
        
        Args:
            resolution (str): 选择的分辨率字符串
            
        Returns:
            tuple: (width, height)
        """
        width, height = self.RESOLUTIONS.get(resolution, (1024, 1024))
        return (width, height)
